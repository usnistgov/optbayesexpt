
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Quick Start &#8212; OptBayesExpt 1.1.1 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/nature.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Manual" href="manual.html" />
    <link rel="prev" title="OptBayesExpt documentation" href="index.html" />

    <link rel="stylesheet" href="https://pages.nist.gov/nist-header-footer/css/nist-combined.css" type="text/css" />
    <script src="https://code.jquery.com/jquery-1.12.4.min.js" type="text/javascript"></script>
    <script src="https://pages.nist.gov/nist-header-footer/js/nist-header-footer.js" type="text/javascript" defer="defer"></script>

<script type="text/javascript" src="https://pages.nist.gov/leaveNotice/js/jquery.leaveNotice-nist.min.js"></script>
<script>
$(document).ready(function(){
  // Mark external (non-nist.gov) A tags with class "external"
  //If the adress start with https and ends with nist.gov
  var re_nist = new RegExp('^https?:\/\/((^\/)*\.)*nist\\.gov(\/|$)');
  //Regex to find address that start with https
  var re_absolute_address = new RegExp('^((https?:)?\/\/)');
  $("a").each(function(){
    var url=$(this).attr('href');
    if(re_nist.test(url) || !re_absolute_address.test(url)){
      $(this).addClass('local');
    }else{
      //This a href appears to be external, so tag it
      $(this).addClass('external');
    }
  });
  // Add leaveNotice to external A elements
  $('a.external').leaveNotice();
});
</script>
<link rel="stylesheet" type="text/css" href="https://pages.nist.gov/leaveNotice/css/jquery.leaveNotice.css" />

<script async type="text/javascript" id="_fed_an_ua_tag" src="https://dap.digitalgov.gov/Universal-Federated-Analytics-Min.js?agency=NIST&subagency=github&pua=UA-42404149-54&yt=true&exts=ppsx,pps,f90,sch,rtf,wrl,txz,m1v,xlsm,msi,xsd,f,tif,eps,mpg,xml,pl,xlt,c">
</script>

  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="manual.html" title="Manual"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="index.html" title="OptBayesExpt documentation"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">OptBayesExpt 1.1.1 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Quick Start</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="quick-start">
<h1>Quick Start<a class="headerlink" href="#quick-start" title="Permalink to this headline">¶</a></h1>
<section id="software-requirements">
<h2>Software Requirements<a class="headerlink" href="#software-requirements" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li><p>git</p></li>
<li><dl class="simple">
<dt>python3.X</dt><dd><ul class="simple">
<li><p>numpy module</p></li>
<li><p>scipy module (for some demos)</p></li>
<li><p>matplotlib.pyplot module (for demos)</p></li>
<li><p>pytest (for testing)</p></li>
</ul>
</dd>
</dl>
</li>
</ol>
</section>
<section id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h2>
<p>Create an empty directory/folder for the <code class="docutils literal notranslate"><span class="pre">optbayesexpt</span></code> repo.  Then, from
a command line, run the following command to
download the software. Note the trailing “.”</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">git</span> <span class="n">clone</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">usnistgov</span><span class="o">/</span><span class="n">optbayesexpt</span><span class="o">.</span><span class="n">git</span> <span class="o">.</span>
</pre></div>
</div>
<p>Now install the optbayesexpt modules by one of these methods:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">pip</span> <span class="n">install</span> <span class="o">.</span>
</pre></div>
</div>
<p>–or–</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">python</span> <span class="n">setup</span><span class="o">.</span><span class="n">py</span> <span class="n">build</span>
<span class="o">&gt;</span> <span class="n">python</span> <span class="n">setup</span><span class="o">.</span><span class="n">py</span> <span class="n">install</span>
</pre></div>
</div>
</section>
<section id="testing">
<h2>Testing<a class="headerlink" href="#testing" title="Permalink to this headline">¶</a></h2>
<p>Test the installation for basic functionality with the following command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">py</span><span class="o">.</span><span class="n">test</span>
</pre></div>
</div>
</section>
<section id="scripting">
<h2>Scripting<a class="headerlink" href="#scripting" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">*.py</span></code> files in the <code class="docutils literal notranslate"><span class="pre">demos/</span></code> folder offer several examples of working
scripts that may be adapted for different applications. This <em>Quick Start</em>
offers an overview of the essentials.</p>
<section id="setting-up">
<h3>Setting up<a class="headerlink" href="#setting-up" title="Permalink to this headline">¶</a></h3>
<p>In the python script, import the necessary modules.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">optbayesexpt</span> <span class="kn">import</span> <span class="n">OptBayesExpt</span>
</pre></div>
</div>
<p>“Out of the box,” OptBayesExpt is ignorant, and
it must be educated about the little universe where it will do its work.
The “Specify …” sections below show how this education process is done.</p>
<section id="specify-the-model">
<h4>Specify the model<a class="headerlink" href="#specify-the-model" title="Permalink to this headline">¶</a></h4>
<p>OPtBayesExpt requires a <code class="docutils literal notranslate"><span class="pre">model_function()</span></code> to describe the relationships
between experimental controls, parameters and measurement results. The
model_function is trusted to tell the truth, the whole truth and nothing but
the truth about how the experiment will behave, so it’s important for the
model function to allow for any real but extraneous “features” of the data,
e.g. sloped backgrounds, extra peaks, etc.</p>
<p>The model function is required to accept three tuples as arguments:
<code class="docutils literal notranslate"><span class="pre">settings</span></code>, <code class="docutils literal notranslate"><span class="pre">parameters</span></code> and <code class="docutils literal notranslate"><span class="pre">constants</span></code>, representing
experimental controls, parameters to be determined, and infrerquently changed
values. When this function is called, either <code class="docutils literal notranslate"><span class="pre">settings</span></code> or <code class="docutils literal notranslate"><span class="pre">parameters</span></code>
will be a tuple of numpy arrays.  The other two arguments will be tuples of
floats.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">my_model_function</span><span class="p">(</span><span class="n">settings</span><span class="p">,</span> <span class="n">parameters</span><span class="p">,</span> <span class="n">constants</span><span class="p">):</span>
   <span class="sd">&quot;&quot;&quot;Example model function</span>

<span class="sd">   The ``(settings, parameters, constants)`` argument structure is required</span>
<span class="sd">   Args:</span>
<span class="sd">       settings (tuple or tuple of array(s)): knob settings</span>
<span class="sd">       parameters (tuple of arrays, or tuple): parameter distribution sample(s)</span>
<span class="sd">       constants (tuple): infrequently changed values</span>

<span class="sd">   Returns: a noise-free model value</span>
<span class="sd">   &quot;&quot;&quot;</span>
   <span class="c1"># Unpack the arguments.  See the &quot;Specify ...&quot; sections in the text.</span>
   <span class="n">knob</span><span class="p">,</span> <span class="o">=</span> <span class="n">settings</span>
   <span class="n">phase</span><span class="p">,</span> <span class="n">delay</span> <span class="o">=</span> <span class="n">parameters</span>
   <span class="n">temperature</span><span class="p">,</span> <span class="o">=</span> <span class="n">constants</span>

   <span class="c1"># This is where the model calculation goes.  It could be defined as a separate</span>
   <span class="c1"># function as suggested here, or the raw math expressions could go here.</span>
   <span class="n">model_result</span> <span class="o">=</span> <span class="n">my_model_calculation</span><span class="p">(</span><span class="n">knob</span><span class="p">,</span> <span class="n">phase</span><span class="p">,</span> <span class="n">delay</span><span class="p">,</span> <span class="n">temperature</span><span class="p">)</span>

   <span class="k">return</span> <span class="n">model_result</span>
</pre></div>
</div>
<p>Hint: The <code class="docutils literal notranslate"><span class="pre">numpy</span></code> arrays offer convenience and computation speed.
Also, iIterations over numpy array elements are handled automatically using
broadcasting. See the Numpy User Guide for information on
<a class="reference external" href="https://docs.scipy.org/doc/numpy/user/basics.broadcasting.html">broadcasting</a>.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">(settings,</span> <span class="pre">parameters,</span> <span class="pre">constants)</span></code> arguments are required for
compatibility, and the example code above shows how they are unpacked. The
following sections describe what these arguments should contain.</p>
</section>
<section id="specify-the-allowed-experimental-settings">
<h4>Specify the allowed experimental settings<a class="headerlink" href="#specify-the-allowed-experimental-settings" title="Permalink to this headline">¶</a></h4>
<p>Generally, there can be more than one setting, so the convention is that
settings are always part of a tuple., i.e. <code class="docutils literal notranslate"><span class="pre">(setting_1_values,</span>
<span class="pre">[setting_2_values,</span> <span class="pre">[</span> <span class="pre">...</span> <span class="pre">]])</span></code> with array-like lists of values for each
setting. Continuous settings must be discretized. The arrays in the settings
tuple may have different lengths. This example specifies a single setting,
a <code class="docutils literal notranslate"><span class="pre">knob</span></code> that goes to 11 with a resolution of 0.1.  In choosing settings,
<code class="docutils literal notranslate"><span class="pre">optbayesexpt</span></code> will evaluate the experimental model function several times
for every combination of setting values included in the
<code class="docutils literal notranslate"><span class="pre">setting_N_values</span></code> arrays.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">knob</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">111</span><span class="p">)</span>
<span class="n">setting_values</span> <span class="o">=</span> <span class="p">(</span><span class="n">knob</span><span class="p">,</span> <span class="p">)</span>
</pre></div>
</div>
<p>The first line here creates an array called <code class="docutils literal notranslate"><span class="pre">knob</span></code> that contains possible
knob settings, and the second line above packs <code class="docutils literal notranslate"><span class="pre">knob</span></code> as the first item in
a one-item tuple.</p>
</section>
<section id="specify-the-model-parameters">
<h4>Specify the model parameters<a class="headerlink" href="#specify-the-model-parameters" title="Permalink to this headline">¶</a></h4>
<p>Parameters are specified by describing their initial or <em>prior</em> probability
distributions, each described by a generous sampling of draws from the
distribution.  It’s easier to demonstrate than to explain.  For example,
suppose there’s a <em>phase</em> parameter that the measurements are to determine.
Let’s say that the phase could be anywhere between <span class="math notranslate nohighlight">\(-\pi/2\)</span> and
<span class="math notranslate nohighlight">\(\pi/2\)</span> but that values outside this range are forbidden.  We
represent this <em>prior</em> knowledge with samples from a uniform distribution.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">n_samples</span> <span class="o">=</span> <span class="mi">50000</span>
<span class="n">phase</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="o">-</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="n">n_samples</span><span class="p">)</span>
</pre></div>
</div>
<p>Suppose also that there is an unknown <em>delay</em> parameter, and that there is
<em>prior</em> information that <em>delay</em> is 3, more or less<span class="math notranslate nohighlight">\(^*\)</span>, but there
aren’t and hard limits.  We might represent this <em>prior</em> using a normal
distribution with a width of 2.0</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">limit</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="mf">3.0</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">,</span> <span class="n">n_samples</span><span class="p">)</span>
<span class="n">parameter_samples</span> <span class="o">=</span> <span class="p">(</span><span class="n">phase</span><span class="p">,</span> <span class="n">limit</span><span class="p">)</span>
</pre></div>
</div>
<p>The 2nd line above packs the parameter samples in a tuple.</p>
<p>Opinion:</p>
<blockquote>
<div><p>In order to generate independent results, I find it helpful to think of
the <em>prior</em> as a generous expression of willingness to consider, rather
than as a concise summary of preconceived notions. Narrow <em>prior</em>
distributions risk biasing the results. A minimally biased result can
always be compared and combined with independent results afterwards.</p>
</div></blockquote>
</section>
<section id="specify-constants">
<h4>Specify constants<a class="headerlink" href="#specify-constants" title="Permalink to this headline">¶</a></h4>
<p>A definition for values (settings or parameters) that are constant for the
duration of an experiment, but that might change at some later time.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">temperature</span> <span class="o">=</span> <span class="mi">19</span>   <span class="c1"># degrees C</span>
<span class="n">constants</span> <span class="o">=</span> <span class="p">(</span><span class="n">temperature</span><span class="p">,</span> <span class="p">)</span>
</pre></div>
</div>
</section>
<section id="configure">
<h4>Configure<a class="headerlink" href="#configure" title="Permalink to this headline">¶</a></h4>
<p>The final part of preparation is to create an instance of the OptBayesExpt class</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">my_obe</span> <span class="o">=</span> <span class="n">OptBayesExpt</span><span class="p">(</span><span class="n">model_function</span><span class="p">,</span> <span class="n">setting_values</span><span class="p">,</span> <span class="n">parameter_samples</span><span class="p">,</span> <span class="n">constants</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
</section>
<section id="running">
<h2>Running<a class="headerlink" href="#running" title="Permalink to this headline">¶</a></h2>
<p>BayesOptExpt participates at two stages in the measurement loop as shown
in the following <strong>pseudocode</strong>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">while</span> <span class="n">still_measuring</span><span class="p">:</span>

    <span class="c1"># (1) my_obe picks a single combination of settings - there&#39;s a choice of methods.</span>
    <span class="c1"># settings = my_obe.opt_setting()</span>
    <span class="c1">#   --  or --</span>
    <span class="n">settings</span> <span class="o">=</span> <span class="n">my_obe</span><span class="o">.</span><span class="n">good_setting</span><span class="p">(</span><span class="n">pickiness</span><span class="o">=</span><span class="n">a_value_between_1_and_10</span><span class="p">)</span>

    <span class="c1"># The experiment makes a measurement using settings and returns a result</span>
    <span class="c1"># (Machine goes &quot;bing!&quot;)</span>
    <span class="c1"># measurement results are reported as tuples</span>
    <span class="n">measurement</span> <span class="o">=</span> <span class="p">(</span><span class="n">actual_settings</span><span class="p">,</span> <span class="n">result</span><span class="p">,</span> <span class="n">uncertainty</span><span class="p">)</span>
    <span class="c1"># (2) report the measurement</span>
    <span class="n">my_obe</span><span class="o">.</span><span class="n">pdf_update</span><span class="p">(</span><span class="n">measurement</span><span class="p">)</span>

<span class="c1"># end while loop</span>

<span class="c1"># get results from the parameter distribution</span>
<span class="c1">#</span>
<span class="n">mean_values</span> <span class="o">=</span> <span class="n">my_obe</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
<span class="n">std_deviaion_values</span> <span class="o">=</span> <span class="n">my_obe</span><span class="o">.</span><span class="n">std</span><span class="p">()</span>
<span class="n">covariance_matrix</span> <span class="o">=</span> <span class="n">my_obe</span><span class="o">.</span><span class="n">covariance</span><span class="p">()</span>
</pre></div>
</div>
<p>Footnote:</p>
<p><span class="math notranslate nohighlight">\(^*\)</span> Previous work has suggested that a <em>delay</em> parameter value of 2 is
transitional and that 5 is “right out.”</p>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Quick Start</a><ul>
<li><a class="reference internal" href="#software-requirements">Software Requirements</a></li>
<li><a class="reference internal" href="#installation">Installation</a></li>
<li><a class="reference internal" href="#testing">Testing</a></li>
<li><a class="reference internal" href="#scripting">Scripting</a><ul>
<li><a class="reference internal" href="#setting-up">Setting up</a><ul>
<li><a class="reference internal" href="#specify-the-model">Specify the model</a></li>
<li><a class="reference internal" href="#specify-the-allowed-experimental-settings">Specify the allowed experimental settings</a></li>
<li><a class="reference internal" href="#specify-the-model-parameters">Specify the model parameters</a></li>
<li><a class="reference internal" href="#specify-constants">Specify constants</a></li>
<li><a class="reference internal" href="#configure">Configure</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#running">Running</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="index.html"
                        title="previous chapter">OptBayesExpt documentation</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="manual.html"
                        title="next chapter">Manual</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/quickstart.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="manual.html" title="Manual"
             >next</a> |</li>
        <li class="right" >
          <a href="index.html" title="OptBayesExpt documentation"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">OptBayesExpt 1.1.1 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Quick Start</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright National Institute of Standards and Technology.Not subject to copyright in the United States..
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 4.0.2.
    </div>
  </body>
</html>